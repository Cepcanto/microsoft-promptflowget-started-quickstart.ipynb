environment:
  python_requirements_txt: requirements.txt
version: 2
inputs:
  content:
    type: string
    is_chat_input: true
    default: If I run on street for 1 hour in Guangzhou City this afternoon, how many calories will I burn?
  file_ids:
    type: list
    default: []
  assistant_id:
    type: string
    default: asst_eHO2rwEYqGH3pzzHHov2kBCG
  thread_id:
    type: string
    default: thread_SFGMhEDNm1MGe4KpdKMbWFMP
outputs:
  answer:
    type: string
    reference: ${assistant.output}
    is_chat_output: true
nodes:
  - name: assistant
    type: python
    source:
      type: code
      path: oai_assistant.py
    inputs:
      conn: chw_openai
      content: ${inputs.content}
      file_ids: ${inputs.file_ids}
      assistant_id: ${inputs.assistant_id}
      thread_id: ${inputs.thread_id}
      assistant_definition:
        module: gpt-4-1106-preview
        instructions: You are a helpful assistant.
        tools:
          - type: code_interpreter
          - type: function
            source:
              type: code
              path: get_calorie.py
            tool_type: python
          - type: function
            source:
              type: code
              path: get_stock_price.py
            tool_type: python
          - type: function
            source:
              type: code
              path: get_temperature.py
            tool_type: python
          - type: function
            source:
              type: code
              path: multiply.py
            tool_type: python
