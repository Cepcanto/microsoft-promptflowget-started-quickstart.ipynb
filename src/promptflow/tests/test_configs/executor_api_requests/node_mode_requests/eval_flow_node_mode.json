{
    "flow": {
      "name": "basic_eval_flow",
      "nodes": [
        {
          "name": "convert_to_label",
          "tool": "val_to_label",
          "inputs": {
            "value": "${flow.query}"
          }
        },
        {
          "name": "convert_to_label_dict",
          "tool": "val_to_label_dict",
          "inputs": {
            "value": "${flow.query}"
          }
        },
        {
          "name": "calculate_accuracy",
          "tool": "calculate_accuracy",
          "reduce": true,
          "inputs": {
            "labels": "${convert_to_label_dict}",
            "true_labels": "${flow.label}"
          }
        },
        {
          "name": "calculate_accuracy2",
          "tool": "calculate_accuracy",
          "reduce": true,
          "inputs": {
            "labels": "${convert_to_label_dict.label}",
            "true_labels": "${flow.label}"
          }
        }
      ],
      "inputs": {
        "query": {
          "type": "string"
        },
        "label": {
          "type": "string"
        }
      },
      "outputs": {
      },
      "tools": [
        {
          "name": "val_to_label",
          "type": "python",
          "inputs": {
            "value": {
              "name": "value",
              "type": [
                "string"
              ]
            }
          },
          "code": "from promptflow import tool\n@tool\ndef val_to_label(value):\n    return '1' if value.startswith('P') else '0'\n",
          "function": "val_to_label"
        },
        {
          "name": "val_to_label_dict",
          "type": "python",
          "inputs": {
            "value": {
              "name": "value",
              "type": [
                "string"
              ]
            }
          },
          "code": "from promptflow import tool\n@tool\ndef val_to_label_dict(value):\n    return {'label': '1'} if value.startswith('P') else {'label': '0'}\n",
          "function": "val_to_label_dict"
        },
        {
            "name": "calculate_accuracy",
            "type": "python",
            "inputs": {
              "labels": {
                "name": "label",
                "type": [
                  "object"
                ]
              },
              "true_labels": {
                "name": "label",
                "type": [
                  "object"
                ]
              }
            },
            "code": "from promptflow import tool\n@tool\ndef calculate_accuracy(labels: list, true_labels: list):\n    if not isinstance(labels, list):\n        raise ValueError('')\n    return 1/float(len(labels))\n",
            "function": "calculate_accuracy"
          }
      ]
    },
    "node_inputs": {
      "flow.query": "Park City Utah",
      "flow.label": "1"
    },
    "connections": {},
    "node_name": "convert_to_label"
  }