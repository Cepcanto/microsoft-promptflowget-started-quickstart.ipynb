environment:
  python_requirements_txt: requirements.txt
version: 2
inputs:
  word:
    type: string
    default: excellent
  assistant_id:
    type: string
    default: asst_YhXYM7AQpno4XMb1apf7qElY
  thread_id:
    type: string
    default: thread_4XY3KFUgMB1v4t4ABMsxoBCt
outputs:
  answer:
    type: string
    reference: ${assistant.output}
    is_chat_output: true
  thread_id:
    type: string
    reference: ${get_or_create_thread.output}
nodes:
  - name: get_or_create_thread
    type: python
    source:
      type: code
      path: get_or_create_thread.py
    inputs:
      conn: azure_open_ai_connection
      thread_id: ${inputs.thread_id}
  - name: assistant
    type: python
    source:
      type: code
      path: add_message_and_run.py
    inputs:
      conn: azure_open_ai_connection
      message: ${inputs.word}
      assistant_id: ${inputs.assistant_id}
      thread_id: ${get_or_create_thread.output}
      download_images: true
      assistant_definition: assistant_definition.yaml
