inputs:
  assistant_input:
    type: list
    default:
    - type: text
      text: I'm going to run for 2 hours today, how much calories will I burn?
  assistant_id:
    type: string
    default: asst_yWhdFYoCS1UatnRRQZGY85aL
  thread_id:
    type: string
    default: ""
outputs:
  assistant_output:
    type: string
    reference: ${add_message_and_run.output}
  thread_id:
    type: string
    reference: ${get_or_create_thread.output}
nodes:
- name: get_or_create_thread
  type: python
  source:
    type: code
    path: get_or_create_thread.py
  inputs:
    conn: openai_connection
    thread_id: ${inputs.thread_id}
- name: add_message_and_run
  type: python
  source:
    type: code
    path: add_message_and_run.py
  inputs:
    conn: openai_connection
    message: ${inputs.chat_input}
    assistant_id: ${inputs.assistant_id}
    thread_id: ${get_or_create_thread.output}
    assistant_definition:
      model: gpt-4-1106-preview
      instructions: You are a helpful assistant.
      tools:
      - type: code_interpreter
      - type: function
        tool_type: python
        source:
          type: code
          path: get_all_clothes.py
      - type: function
        tool_type: python
        source:
          type: code
          path: get_calorie.py
      - type: function
        tool_type: python
        source:
          type: code
          path: get_current_location.py
        predefined_inputs:
          predefined_input: 1
      - type: function
        tool_type: python
        source:
          type: code
          path: get_current_weather.py
      - type: function
        tool_type: python
        source:
          type: code
          path: multiply.py
    download_images: true
version: 2
